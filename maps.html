<!-- New version by April Shen april@cs.uw.edu -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Metro Maps for Photos</title>
    <script type="text/javascript" src="d3.v3.js"></script>
    <script type="text/javascript" src="social.js"></script>
    <script type="text/javascript" src="metro.js"></script>
<style>

.node {
  stroke: #fff;
  stroke-width: 1.5px;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

.axis path,
.axis line {
  fill: none;
  stroke: black;
  shape-rendering: crispEdges;
}

.axis text {
  font-family: sans-serif;
  font-size: 11px;
}

</style>
<body>

  <table cellspacing="10">
  </table>

<script>

  var mapfile = "large-map.json";
  var graphfile = "large-graph.json";
  var featFile = "large-feats.json";

  var faces, dates, longs, lats;
  d3.json(featFile, function(error, data) {
    if (error) console.warn(error);

    // load features
    faces = data.faces;
    dates = [];
    for (var i = 0; i < data.dates.length; i++) {
      dates.push(new Date(data.dates[i] * 1000)); //s->ms conversion
    }
    longs = data.longs;
    lats = data.lats;

    // make table
    var tab = d3.select("table");
    var row = tab.append("tr");
    row.append("td")
      .attr("id", "metro-map");
    row.append("td")
      .attr("id", "show-image");
    tab.append("tr")
      .append("td")
      .attr("id", "social-graph");

    // add content
    metro(mapfile, faces, dates, longs, lats, d3.select("#metro-map"));
    social(graphfile, d3.select("#social-graph"));
  });
    
</script>

  </body>
</html>
